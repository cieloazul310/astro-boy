---
import { siteMetadata } from "../data";
import { useAbsoluteUrl } from "../utils";

export interface Props {
  title?: string;
  description?: string;
  image?: string;
  siteType?: "website" | "book" | "profile" | string;
  twitterCardType?: "summary" | "summary_large_image" | "app" | "player";
}

const {
  title,
  description,
  image,
  siteType = "website",
  twitterCardType,
} = Astro.props;

const contentTitle = title
  ? `${title} - ${siteMetadata.title}`
  : siteMetadata.title;
const seoDescription = description || siteMetadata.description;
const imageUrl = useAbsoluteUrl(image ?? "/ogimage.jpeg");
---

<>
  <title>{contentTitle}</title>
  {
    title && (
      <>
        <meta name="og:title" content={contentTitle} />
        <meta name="twitter:title" content={contentTitle} />
      </>
    )
  }
  <meta name="og:type" content={siteType} />
  {
    seoDescription && (
      <>
        <meta name="description" content={seoDescription} />
        <meta name="og:description" content={seoDescription} />
        <meta name="twitter:description" content={seoDescription} />
      </>
    )
  }
  <meta name="twitter:card" content={twitterCardType} />
  {
    siteMetadata.title && (
      <meta name="twitter:site" content={siteMetadata.title} />
    )
  }
  {
    imageUrl && (
      <>
        <meta name="image" content={imageUrl} />
        <meta name="og:image" content={imageUrl} />
        <meta name="twitter:image" content={imageUrl} />
      </>
    )
  }
  <slot />
</>
